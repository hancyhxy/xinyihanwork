<!-- /Users/qiansui/Desktop/xinyihan/personalwebsite/gallery/cityjazz/index.html -->
<!-- City Jazz P5JS interactive art page with consistent header/footer design -->
<!-- Interactive braille art display showing SYDNEY with dynamic Mondrian colors -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Jazz - Xinyi Han Portfolio</title>
    <!-- Inherit site favicon -->
    <link rel="icon" type="image/x-icon" href="../../logo/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="../../logo/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="../../logo/favicon-32x32.png">
    <link rel="stylesheet" href="../../style/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <style>
        .artwork-container {
            background-color: rgb(230, 230, 230);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 70vh;
            margin: var(--spacing-xl) 0;
        }
        .artwork-main {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <div data-component="header"></div>

    <!-- Project Info Section -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1 style="font-size: var(--font-size-2xl); font-weight: 600; margin-bottom: var(--spacing-md);">City Jazz</h1>
                <p class="hero-text">
                    An interactive digital artwork that transforms "SYDNEY" into rhythmic jazz through 
                    dynamic braille patterns and vibrant Mondrian colors, creating visual harmony like musical beats.
                    Built with P5.js, this piece explores the intersection of accessibility, typography, and generative art.
                </p>
            </div>
        </div>
    </section>

    <!-- Artwork Container -->
    <section class="artwork-container">
        <main class="artwork-main"></main>
    </section>
    
    <script>
        let canvasSize = 600;
        let brailleArea = canvasSize * 0.8;
        let textArea = canvasSize * 0.2;
        let lastColorUpdate = 0;
        let colorUpdateInterval = 1000;
        let brailleMap = {
          'S': [[1,0],[0,1],[1,1]],
          'Y': [[1,1],[0,1],[1,0]],
          'D': [[1,0],[0,1],[0,1]],
          'N': [[1,1],[0,1],[0,1]],
          'E': [[1,0],[0,0],[1,1]]
        };
        // 设置蒙德里安颜色
        let mondrianColors = ['#FF0000', '#0000FF', '#FFFF00', '#FFFFFF', '#000000'];
        let currentColors = [];
        let word = 'SYDNEY';


        function setup() {
          createCanvas(canvasSize, canvasSize);
          background(255);
          
          initializeColors();
        }

        function draw() {
          background(230);
          
          if (millis() - lastColorUpdate > colorUpdateInterval) {
            updateColors();
            lastColorUpdate = millis();
          }
          
          drawBrailleWord();
          drawBottomText();
        }

        function initializeColors() {
          currentColors = [];
          for (let i = 0; i < word.length; i++) {
            let charColors = [];
            for (let row = 0; row < 3; row++) {
              for (let col = 0; col < 2; col++) {
                charColors.push(getRandomMondrianColor());
              }
            }
            currentColors.push(charColors);
          }
        }

        function updateColors() {
          for (let i = 0; i < currentColors.length; i++) {
            for (let j = 0; j < currentColors[i].length; j++) {
              currentColors[i][j] = getRandomMondrianColor();
            }
          }
        }

        function getRandomMondrianColor() {
          return random(mondrianColors);
        }

        function getBraillePattern(char) {
          return brailleMap[char] || [[0,0],[0,0],[0,0]];
        }

        function drawBrailleWord() {
          let charSpacing = canvasSize / 7;
          let startX = charSpacing;
          let centerY = brailleArea / 2;
          let dotSize = charSpacing / 8;
          let dotSpacing = charSpacing / 4;
          
          for (let i = 0; i < word.length; i++) {
            let char = word[i];
            let pattern = getBraillePattern(char);
            let charX = startX + (i * charSpacing);
            
            let colorIndex = 0;
            for (let row = 0; row < 3; row++) {
              for (let col = 0; col < 2; col++) {
                let dotX = charX + (col * dotSpacing);
                let dotY = centerY - dotSpacing + (row * dotSpacing);
                let filled = pattern[row][col];
                let color = currentColors[i][colorIndex];
                
                drawBrailleDot(dotX, dotY, filled, color, dotSize);
                colorIndex++;
              }
            }
          }
        }

        function drawBrailleDot(x, y, filled, color, size) {
          if (filled === 1) {
            // 添加跳动效果
            let pulseFactor = 1 + sin(millis() * 0.01 + x * 0.1) * 0.3;
            let dynamicSize = size * pulseFactor;
            
            fill(color);
            noStroke();
            circle(x, y, dynamicSize);
          } else {
            fill(255);
            stroke(200);
            strokeWeight(1);
            circle(x, y, size);
          }
        }
        // 添加文字描述
        function drawBottomText() {
          let textY = brailleArea + (textArea / 2);
          let fontSize = canvasSize / 15;
          
          fill(0);
          noStroke();
          textAlign(CENTER, CENTER);
          textSize(fontSize);
          textStyle(BOLD);
          text('SYDNEY', canvasSize / 2, textY);
          
          let description = 'A digital artwork that transforms Sydney into rhythmic jazz through braille patterns and Mondrian colors, creating visual harmony like musical beats.';
          let maxTextWidth = canvasSize * 0.8; 
          let textBoxHeight = 80; 
          
          fill(60);
          textAlign(CENTER);
          textSize(fontSize/3);
          textStyle(ITALIC);
          
          text(description, 
               canvasSize * 0.1,      
               textY - 100,         
               maxTextWidth,          
               textBoxHeight);     
        }
    </script>

    <!-- Contact Section -->
    <div data-component="footer"></div>

    <script src="../../components/component-loader.js"></script>
    <script src="../../style/script.js"></script>
</body>
</html>
